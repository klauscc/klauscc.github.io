<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
    
  linux入门与服务器使用指南 - Feng Cheng
  
  </title>
  
  
  
  <link href="atom.xml" rel="alternate" title="Feng Cheng" type="application/atom+xml">
    <link rel="stylesheet" href="asset/css/foundation.min.css" />
    <link rel="stylesheet" href="asset/css/docs.css" />
    <script src="asset/js/vendor/modernizr.js"></script>
    <script src="asset/js/vendor/jquery.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  
  <link href="asset/highlightjs/styles/github.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>
<script type="text/javascript">
  function before_search(){
    var searchVal = 'site:klauscc.github.io ' + document.getElementById('search_input').value;
    document.getElementById('search_q').value = searchVal;
    return true;
  }
</script>
  </head>
  <body class="antialiased hide-extras">
    
    <div class="marketing off-canvas-wrap" data-offcanvas>
      <div class="inner-wrap">


<nav class="top-bar docs-bar hide-for-small" data-topbar>


  <section class="top-bar-section">
  <div class="row">
      <div style="position: relative;width:100%;"><div style="position: absolute; width:100%;">
        <ul id="main-menu" class="left">
        
        <li id=""><a target="_self" href="Feng_Cheng.html">Home</a></li>
        
        <li id=""><a target="_self" href="all.html">Blogs</a></li>
        
        <li id=""><a target="_self" href="archives.html">Archives</a></li>
        
        <li id=""><a target="_self" href="https://drive.google.com/file/d/1QF5IMbwHXaI3nDLWRp45e-5nzzcRO1Ju/view?usp=sharing">Resume</a></li>
        
        </ul>

        <ul class="right" id="search-wrap">
          <li>
<form target="_blank" onsubmit="return before_search();" action="https://google.com/search" method="get">
    <input type="hidden" id="search_q" name="q" value="" />
    <input tabindex="1" type="search" id="search_input"  placeholder="Search"/>
</form>
</li>
          </ul>
      </div></div>
  </div>
  </section>

</nav>

        <nav class="tab-bar show-for-small">
  <a href="javascript:void(0)" class="left-off-canvas-toggle menu-icon">
    <span> &nbsp; Feng Cheng</span>
  </a>
</nav>

<aside class="left-off-canvas-menu">
      <ul class="off-canvas-list">
        
        <li><a target="_self" href="Feng_Cheng.html">Home</a></li>
        
        <li><a target="_self" href="all.html">Blogs</a></li>
        
        <li><a target="_self" href="archives.html">Archives</a></li>
        
        <li><a target="_self" href="https://drive.google.com/file/d/1QF5IMbwHXaI3nDLWRp45e-5nzzcRO1Ju/view?usp=sharing">Resume</a></li>
        

    <li><label>Categories</label></li>

        
            <li><a href="linux.html">linux</a></li>
        
            <li><a href="paper%20reading.html">paper reading</a></li>
        
            <li><a href="deep%20learning.html">deep learning</a></li>
        
            <li><a href="Digital%20Image%20Forensics.html">Digital Image Forensics</a></li>
        
            <li><a href="engineering.html">engineering</a></li>
         

      </ul>
    </aside>

<a class="exit-off-canvas" href="#"></a>


        <section id="main-content" role="main" class="scroll-container">
        
       

 <script type="text/javascript">
  $(function(){
    $('#menu_item_index').addClass('is_active');
  });
</script>
<div class="row">
  <div class="large-8 medium-8 columns">
      <div class="markdown-body article-wrap">
       <div class="article">
          
          <h1>linux入门与服务器使用指南</h1>
     
        <div class="read-more clearfix">
          <span class="date">2018/10/14</span>

          <span>posted in&nbsp;</span> 
          
              <span class="posted-in"><a href='linux.html'>linux</a></span>
           
         
          <span class="comments">
            

            
          </span>

        </div>
      </div><!-- article -->

      <div class="article-content">
      <p>深度学习的体系依托于python,在linux系统繁华，希望从事深度学习研究非常有必要对linux有一个很好的了解。</p>

<p><strong>本教程并非一个从零开始或者完全指南，你需要以下能力:</strong></p>

<pre><code>1. 了解linux 文件结构
2. 能使用命令行在各个路径下自由切换，查看文件夹和文件属性等
3. 了解什么是环境变量. 
4. 了解两个重要的文件的作用： /etc/profile, ~/.bashrc
5. 使用过pip安装package,在自己代码中使用过自己安装的package
</code></pre>

<p>看完本教程你将会掌握一下能力</p>

<pre><code>1. 在无root权限的情况下自由的使用服务器
2. 自己编译软件，拥有不google也可以解决依赖各种不对应的问题的能力。
3. 使用conda管理自己的环境，管理自己的依赖包
</code></pre>

<span id="more"></span><!-- more -->

<hr/>

<ul>
<li>任何包都可以<strong>不使用root安装</strong>(不考虑与系统密切相关的包)。</li>
<li>没有完整看过<a href="https://conda.io/docs/user-guide/index.html">Conda官方参考文档</a> 必须阅读第四章。</li>
<li>需要自己编译安装软件的,比如caffe，py-faster-rcnn等，必须阅读第三章。</li>
</ul>

<p><strong>内容较多，请按需阅读。</strong></p>

<ul>
<li>
<a href="#toc_0">1. 常用命令</a>
<ul>
<li>
<a href="#toc_1">1.0 必须掌握</a>
<ul>
<li>
<a href="#toc_2">1.0.1 命令</a>
</li>
<li>
<a href="#toc_3">1.0.2 环境变量</a>
</li>
</ul>
</li>
<li>
<a href="#toc_4">1.1 翻墙</a>
</li>
<li>
<a href="#toc_5">1.2 权限</a>
</li>
<li>
<a href="#toc_6">1.3 访问服务器</a>
<ul>
<li>
<a href="#toc_7">1.3.1 Windows</a>
</li>
<li>
<a href="#toc_8">1.3.2 Linux, Mac</a>
</li>
</ul>
</li>
<li>
<a href="#toc_9">1.4 服务器间传输文件</a>
<ul>
<li>
<a href="#toc_10">1.4.1 从远程服务器拉到本地</a>
</li>
<li>
<a href="#toc_11">1.4.2 从本地推到远程服务器</a>
</li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#toc_12">2. 安装软件</a>
</li>
<li>
<a href="#toc_13">3.头文件和链接库</a>
<ul>
<li>
<a href="#toc_14">3.1 Compile Time</a>
<ul>
<li>
<a href="#toc_15">3.1.1 <strong>那如果我想要编译的包的依赖不在上面的路径中怎么办？</strong></a>
</li>
<li>
<a href="#toc_16">3.1.2 SEARCH PATH order</a>
</li>
</ul>
</li>
<li>
<a href="#toc_17">3.2 Run Time</a>
<ul>
<li>
<a href="#toc_18">3.2.1 Run Time Search Path Order</a>
</li>
</ul>
</li>
<li>
<a href="#toc_19">3.3 有用的命令</a>
</li>
</ul>
</li>
<li>
<a href="#toc_20">4. conda环境管理</a>
<ul>
<li>
<a href="#toc_21">4.1 管理环境</a>
</li>
<li>
<a href="#toc_22">4.2 使用环境</a>
</li>
<li>
<a href="#toc_23">4.3 创建环境</a>
</li>
<li>
<a href="#toc_24">4.4 安装卸载package</a>
</li>
<li>
<a href="#toc_25">4.5 目录结构</a>
</li>
</ul>
</li>
</ul>


<h2 id="toc_0">1. 常用命令</h2>

<h3 id="toc_1">1.0 必须掌握</h3>

<h4 id="toc_2">1.0.1 命令</h4>

<p>具体使用方法自行百度或google.<br/>
- <code>cd, ls, mkdir</code><br/>
- <code>find</code> 配合grep 查找文件很方便<br/>
- <code>locate</code> 直接定位文件位置,速度极快，系统将所有文件建立了一个索引，所以新增的文件需要一段时间才可以locate到. 如<code>locate libhdf5.so</code><br/>
- <code>which</code> 查找命令的完整路径. 如<code>which top</code>会输出<code>/usr/bin/top</code><br/>
- <code>grep</code> 可以过滤输出流的文本<br/>
- <code>top</code> 查看正在运行的进程<br/>
- <code>nvidia-smi</code> 查看显卡占用情况<br/>
- <code>df -h</code> 查看磁盘挂载和已用情况<br/>
- <code>screen</code> 或者<code>tmux</code> 在这些窗口中运行的任务，即使关掉你的终端也不会被杀掉，否则一旦ssh连接关闭任务会被杀死。</p>

<h4 id="toc_3">1.0.2 环境变量</h4>

<p><code>/etc/profile</code>(root才有写权限)和<code>~/.bashrc</code>是每次通过<code>ssh</code>登陆服务器都会运行的脚本。运行顺序是 <code>/etc/profile</code>-&gt;<code>~/.bashrc</code>。<br/>
一些希望每次登陆后都生效的环境变量可以放在<code>~/.bashrc</code>里面。</p>

<ul>
<li><code>PATH</code>: 额外的可执行文件搜索路径</li>
<li><code>CPATH</code>: 额外的头文件搜索路径</li>
<li><code>LD_LIBRARY_PATH</code>: 额外的RunTime 搜索路径</li>
<li>上面的路径都会添加到系统标准路径之前。 可以<code>vim /etc/profile</code>查看示例。</li>
</ul>

<h3 id="toc_4">1.1 翻墙</h3>

<p><code>proxychains4 your-command</code>. 比如<code>proxychains4 curl www.google.com</code>.服务器上翻墙免费提供，<strong>如果想其他平台linux/macOs/windows/ios/android等翻墙，欢迎赞助</strong>。</p>

<h3 id="toc_5">1.2 权限</h3>

<p><code>ll</code>, <code>chmod</code><br/>
 <a href="http://cn.linux.vbird.org/linux_basic/0210filepermission.php">鸟哥的linux私房菜,第六章linux的文件权限与目录配置</a></p>

<h3 id="toc_6">1.3 访问服务器</h3>

<h4 id="toc_7">1.3.1 Windows</h4>

<p>安装<a href="https://mobaxterm.mobatek.net/">MobaXterm</a>, 自带x11图形转发，使用会产生图形界面的命令就像本地显示屏一样弹出图形界面。</p>

<h4 id="toc_8">1.3.2 Linux, Mac</h4>

<p>命令行<code>ssh -p port username@host-ip</code>, 推荐添加公钥访问<a href="https://www.cnblogs.com/Percy_Lee/p/5698603.html">使用ssh公钥实现免密访问</a>. Mac 需要<strong>安装X11</strong>才能进行x11转发，Ubuntu自带。 </p>

<p>*<strong>uix平台建议添加config文件，这样登陆远程服务器不需要冗长的命令。</strong></p>

<p>添加文件<code>~/.ssh/config</code>,添加内容类似下面</p>

<pre><code>HOST ss2
    HostName wsl2
    #or ip
    #HostName 192.168.1.140
    Port 10010
    User klaus
    ServerAliveInterval 30
HOST ss1
    HostName wsl1
    Port 10086
    User klaus
    ServerAliveInterval 30
</code></pre>

<p>添加以后命令行输入<code>ssh ss1</code>即可登陆wsl1,账号是klaus. 使用<code>ssh other-username@ss1</code>则以other-username登陆。</p>

<h3 id="toc_9">1.4 服务器间传输文件</h3>

<h4 id="toc_10">1.4.1 从远程服务器拉到本地</h4>

<p><code>[ ]</code>中内容表示可有可无，传输文件夹需要<code>-r</code></p>

<ul>
<li>单个文件推荐 <code>scp [-r] -P port username@host-ip:/path/to/your/file /save/to/here</code></li>
<li>大量文件推荐，可端点续传 <code>sync -avz -P -e &quot;ssh -p $portNumber&quot; user@remoteip:/path/to/files/ /local/path/</code></li>
</ul>

<h4 id="toc_11">1.4.2 从本地推到远程服务器</h4>

<ul>
<li>单个文件推荐 <code>scp [-r] -P port /your/data/path username@host-ip:/path/to/save</code></li>
<li>大量文件推荐，可端点续传 <code>rsync -avz -P -e &quot;ssh -p $portNumber&quot;  /local/path/ user@remoteip:/path/to/files/</code></li>
</ul>

<p><strong>在wsl1(192.168.1.139)和wsl2(192.168.1.140)之间传输数据,ip地址请写内网ip，或者写<code>wsl1</code>或者<code>wsl2</code>，服务器会自动解析到对应ip。内网间传输文件可以达到100MB/S</strong></p>

<h2 id="toc_12">2. 安装软件</h2>

<p>linux下一般称软件为包(package). 安装方法有包管理器安装和手动编译。安装以后的东西主要分为三个部分:</p>

<ul>
<li>可执行文件. <strong>一般保存在<code>/**/bin</code>下</strong></li>
<li>头文件. c/c++的头文件，一般是作为别的package的依赖。<strong>一般保存在<code>/**/include</code>下</strong></li>
<li>链接库. 动态链接库.so和静态链接库.a. 一般作为别的package的依赖.<strong>一般保存在<code>/**/lib</code>或者<code>/**/lib64</code>下</strong></li>
</ul>

<h2 id="toc_13">3.头文件和链接库</h2>

<p><strong>头文件</strong>一般是c/c++的头文件,后缀名为<code>.h,.hxx,.hpp</code>等.<br/>
<strong>链接库</strong>分为动态链接库和静态链接库,linux上后缀名分别为<code>.so</code>和<code>.a</code>,实质上是<strong>一堆编译后的c/cpp文件(.o)打包成.so或.a</strong>。</p>

<p><strong>静态链接库.a会被嵌入到编译的程序中，但是动态链接库不会，需要在运行时找到.so文件才能运行。</strong></p>

<p>一般的软件都会依赖很多package(头文件和链接库)。编译软件时称为<strong>Compile Time</strong>, 运行软件时称为<strong>Run Time</strong>.在 <strong>Compile Time</strong>需要让编译器找到它所依赖的头文件和链接库，在<strong>Run Time</strong>需要让可执行文件找到它所以来的动态链接库。<strong>Compile Time</strong>和<strong>Run Time</strong>寻找依赖的路径是<strong>不一样</strong>的，也就是说<strong>即时编译通过，在运行的时候也会存在找不到动态链接库的情况，一般会报<code>no defined reference to ...</code>错误</strong>。</p>

<h3 id="toc_14">3.1 Compile Time</h3>

<p>在我们服务器上,查看头文件和链接库的<code>search path</code>, run <code>cpp -v /dev/null -o /dev/null</code>。编译器会根据<code>search path</code>从头一个一个的查找对应的头文件和链接库。也就是说如果安装了同一个package的不同版本，出现在前面的会覆盖掉后面的。</p>

<pre><code>#include &lt;...&gt; search starts here:
 /usr/local/cudnn-6.0/include
 /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include
 /usr/local/include
 /usr/include
LIBRARY_PATH=/usr/lib/gcc/x86_64-redhat-linux/4.8.5/:
/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/:
/lib/../lib64/:
/usr/lib/../lib64/:
/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../:
/lib/:
/usr/lib/
</code></pre>

<p>上面的目录分别是编译器寻找头文件和链接库的<code>search path</code>，寻找顺序按照路径先后顺序。</p>

<h4 id="toc_15">3.1.1 <strong>那如果我想要编译的包的依赖不在上面的路径中怎么办？</strong></h4>

<p>有两种方法:</p>

<ol>
<li><p><strong>编译选项添加gcc/g++的Flags, <code>-I</code>, <code>-L</code></strong>.<br/>
<code>-I</code>添加寻找头文件的目录，<code>-L</code>添加寻找链接库的目录，这两个flag可以添加多个。<br/>
如 <code>g++ test.cpp -lmylib -L/path/to/your/lib/dir -I/path/to/your/include/dir -I/path/to/your/include/dir2</code>,这一行命令告诉编译器去<code>/path/to/your/include/dir</code>和<code>/path/to/your/include/dir2</code>目录下找头文件，去<code>/path/to/your/lib/dir</code>找链接库，如果没找到就会去系统标准的<code>search path</code>中去找。 <code>-l</code>告诉编译器去寻找的动态链接库的名字，如<code>-lmylib</code>会去寻找名称为<code>libmylib.so</code>或者<code>libmylib.a</code>链接库(lib + mylib + .so/.a)。需要寻找的头文件的名称已在源代码的<code>#include &quot;&quot;</code>中指定了。</p></li>
<li><p><strong>添加环境变量 <code>CPATH</code>和<code>LIBRARY_PATH</code></strong> <br/>
<code>CPATH</code>是指定额外头文件的<code>search path</code>，多个目录以冒号<code>:</code>分隔。<br/>
<code>LIBRARY_PATH</code>是指定额外lib的<code>search path</code>,多个目录以冒号<code>:</code>分隔。<strong>特别需要注意的是，在64位系统上，每一个添加的目录，系统默认编译的gcc/g++会添加两个目录，<code>${your-dir}/../lib64</code>和<code>${your-dir}</code>。并且，对于所有目录<code>lib64</code>会位于<code>lib</code>之前,就是说所有<code>${any-prefix}/lib</code>目录都会位于所有<code>${any-prefix}/lib64</code>之后。</strong><br/>
<code>CPATH</code>和<code>LIBRARY_PATH</code>会添加到<code>-I,-L</code>添加的目录之后，系统标准目录之前。<br/>
例如添加<code>/usr/local/lib</code></p></li>
</ol>

<pre><code>export LIBRARY_PATH=/usr/local/lib
#如果LIBRARY_PATH不为空, 命令行输入echo $LIBRARY_PATH 打印不为空
#加上一个:$LIBRARY_PATH会在原有$LIBRARY_PATH前面再加上你想加的路径
export LIBRARY_PATH=/usr/local/lib:$LIBRARY_PATH
</code></pre>

<p>添加之后<code>search path</code>变为</p>

<pre><code>LIBRARY_PATH=/usr/local/lib/../lib64/:
/usr/lib/gcc/x86_64-redhat-linux/4.8.5/:
/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../../lib64/:
/lib/../lib64/:
/usr/lib/../lib64/:
/usr/local/lib/:
/usr/lib/gcc/x86_64-redhat-linux/4.8.5/../../../:
/lib/:
/usr/lib/

#/usr/local/lib64排在第一位，但是/usr/local/lib在/lib64,/usr/lib64之后
</code></pre>

<h4 id="toc_16">3.1.2 SEARCH PATH order</h4>

<p>现在我们有<code>-I,-L</code>,<code>CPATH, LIBRARY_PATH</code>两种方式添加额外的path，还有一个后面会讲的<code>LD_LIBRARY_PATH</code>，这三种方法都会对编译器的search path产生影响。<br/>
假设 </p>

<pre><code>    LD_LIBRARY_PATH=dirlist
    ld ... -Lpath1 ... -Lpathn ...
    LIBRARY_PATH=libpathlist
</code></pre>

<p>那么search path 顺序为:</p>

<pre><code>    # -L &gt; LD_LIBRARY_PATH &gt; LIBRARY_PATH
    path1 ... pathn dirlist libpathlist
</code></pre>

<h3 id="toc_17">3.2 Run Time</h3>

<p>Run Time 即为程序运行加载的时候。Compile Time中<code>-L</code>和<code>LIBRARY_PATH</code>不会对Run Time 产生任何影响。也就是说，在运行程序的时候<code>-L</code>或者<code>LIBRARY_PATH</code>指定的额外路径如果没有被添加到runtime的search path里去，那么程序将会找不到对应的lib！</p>

<h4 id="toc_18">3.2.1 Run Time Search Path Order</h4>

<ol>
<li>rpath. 编译时指定的路径，如<code>g++ -o hello hello.c -Wl,-rpath,/usr/local/lib/hello/B,-rpath,/usr/local/lib/hello/A</code></li>
<li>LD_LIBRARY_PATH. 该环境变量中指定的路径。<strong>它的一个副作用是它的路径会影响编译器编译的路径，见3.1.2</strong></li>
<li><p>/etc/ld.so.conf 中指定的路径. 通过<code>ldconfig -v 2&gt;/dev/null | grep -v ^$&#39;\t&#39;</code>查看 <br/>
<code><br/>
(klaus_all) [klaus@wsl1 build]$ ldconfig -v 2&gt;/dev/null | grep -v ^$&#39;\t&#39;<br/>
/usr/lib64/dyninst:<br/>
/usr/lib64/iscsi:<br/>
/usr/lib64/mysql:<br/>
/usr/lib64/qt-3.3/lib:<br/>
/lib:<br/>
/lib64:<br/>
/lib/sse2: (hwcap: 0x0000000004000000)<br/>
/lib64/sse2: (hwcap: 0x0000000004000000)<br/>
/lib64/tls: (hwcap: 0x8000000000000000)<br/>
</code></p></li>
<li><p>/lib64,/usr/lib64,/lib,/usr/lib. 默认路径。</p></li>
</ol>

<p>一般的程序的rpath只有当前程序所在目录，所以如果你依赖了3和4中没有的路径的,你需要额外指定<code>LD_LIBRARY_PATH</code>, 比如 <code>export LD_LIBRARY_PATH=/some/path:$LD_LIBRARY_PATH</code>,为了方便可以将这一句添加到<code>~/.bashrc</code>中。</p>

<h3 id="toc_19">3.3 有用的命令</h3>

<p>弄清楚了Compile Time 和Run Time 的search path, 在编译程序，运行程序中遇到的问题基本可以自己解决了。有几个常用的命令可以帮助定位问题.</p>

<ul>
<li>ldd. </li>
</ul>

<p>查看一个lib或者executable所依赖的.so和其link的路径。如</p>

<pre><code>(klaus_all) [klaus@wsl1 build]$ ldd libextract_dct.so
    linux-vdso.so.1 =&gt;  (0x00007ffd9876c000)
    libjpeg.so.9 =&gt; /home/klaus/.conda/envs/klaus_all/lib/libjpeg.so.9 (0x00007fe23df50000)
    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007fe23db72000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fe23e38f000)
</code></pre>

<ul>
<li>nm.</li>
</ul>

<p>列出一个lib或者executable定义的所有symbol.如</p>

<pre><code>(klaus_all) [klaus@wsl1 build]$ nm libextract_dct.so
0000000000202088 B __bss_start
0000000000202088 b completed.6337
                 w __cxa_finalize@@GLIBC_2.2.5
...skipped...
                 U jpeg_finish_decompress@@LIBJPEG_9.0
                 U jpeg_read_coefficients@@LIBJPEG_9.0
                 U jpeg_read_header@@LIBJPEG_9.0
                 U jpeg_save_markers@@LIBJPEG_9.0
                 U jpeg_std_error@@LIBJPEG_9.0
                 U jpeg_stdio_src@@LIBJPEG_9.0
                 w _Jv_RegisterClasses
                 U malloc@@GLIBC_2.2.5
0000000000000b18 T read_jpeg
0000000000000a60 t register_tm_clones
0000000000202088 d __TMC_END__
</code></pre>

<ul>
<li>readelf -d.</li>
</ul>

<p>列出ELF文件的信息,可以用来查看rpath. 如</p>

<pre><code>(klaus_all) [klaus@wsl1 build]$ readelf -d libextract_dct.so

Dynamic section at offset 0x1de8 contains 27 entries:
  Tag        Type                         Name/Value
 0x0000000000000001 (NEEDED)             Shared library: [libjpeg.so.9]
 0x0000000000000001 (NEEDED)             Shared library: [libc.so.6]
 0x000000000000000e (SONAME)             Library soname: [libextract_dct.so]
 0x000000000000000f (RPATH)              Library rpath: [/home/klaus/.conda/envs/klaus_all/lib/libjpeg.so:/home/klaus/.conda/envs/klaus_all/lib]
 0x000000000000000c (INIT)               0x918
...skipped...
 0x000000006ffffff9 (RELACOUNT)          3
 0x0000000000000000 (NULL)               0x0
</code></pre>

<h2 id="toc_20">4. conda环境管理</h2>

<p><a href="https://conda.io/docs/user-guide/tasks/manage-environments.html">conda</a>是python的一个包管理器，但是它<strong>不仅仅是</strong>一个python的包管理器。</p>

<ul>
<li>环境管理。你可以创建任意多的环境，每个环境可以安装不同的包，不同的版本，每个环境之间互相不影响。</li>
<li><strong>它可以安装非python包</strong>,如<code>tmux</code>, <code>cmake</code>, <code>hdf5</code>等等.需要什么可以先去google一下,比如搜索&quot;tmux conda&quot;，或者直接去<a href="anaconda.org">Anaconda Cloud</a>搜索是否有对应的包。</li>
<li>兼容pip. <strong>可以使用pip安装python包而不需要root权限。</strong>推荐首先查看conda上是否有这个包，如果没有再使用pip安装。</li>
</ul>

<h3 id="toc_21">4.1 管理环境</h3>

<p>服务器上配置好了几个环境:<br/>
    - <code>root</code>. 安装好miniconda后干净的环境，仅含有必要的几个包。<br/>
    - <code>common</code>. 常用的几个python包，编译caffe所有需要的依赖也在common中装好了。没有安装任何框架。<br/>
    - <code>dl-2.7</code>. 装好了keras, tensorflow, pytorch等深度学习框架。python版本为2.7</p>

<p>这两个环境只有<code>root</code>用户有权限更改（安装,删除package）,但是所有用户都有使用权限(read)。</p>

<h3 id="toc_22">4.2 使用环境</h3>

<ul>
<li>查看环境. <code>conda env list</code>. 查看所有的环境,其它用户的环境不可见。</li>
<li>查看当前环境中安装的包. <code>conda list</code>. 加上<code>grep</code>可以</li>
<li>激活环境. <code>source activate env-name</code>. env-name为环境名称如common, dl-2.7, 下同。</li>
<li>停止环境. <code>source deactivate env-name</code></li>
</ul>

<p>如果某个环境会经常</p>

<h3 id="toc_23">4.3 创建环境</h3>

<ul>
<li><code>conda create -n env-name</code> 创建一个名为env-name的环境，</li>
<li><code>conda create -n env-name numpy scipy</code> 创建一个包含numpy和scipy包的环境</li>
<li><code>conda create -n env-name scipy=0.15.0</code> 指定package的版本</li>
<li><code>conda create -n env-name --clone cloned-env</code> 克隆cloned-env到env-name中，所有cloned-env中的包都会被克隆岛env-name中。</li>
</ul>

<p><strong>自己创建的环境有写权限，你可以对它做任何事情</strong></p>

<h3 id="toc_24">4.4 安装卸载package</h3>

<ul>
<li>conda install package-name 安装</li>
<li>conda remove package-name 卸载</li>
</ul>

<p>conda 自带了几个default channel(类似仓库，每个仓库里有很多package), 但有很多额外的channel，使用上面安装命令找不到的包在其它channel可能会找到。可以去google <code>package-name conda</code> 或者<a href="anaconda.org">Anaconda Cloud</a>搜索是否存在。</p>

<h3 id="toc_25">4.5 目录结构</h3>

<p><code>root</code>创建的环境都会被安装到<code>$CONDA_INSTALL_PATH/envs</code>下，其它用户创建的环境会被安装到<code>~/.conda/envs</code>下.</p>

<p>每个环境下有三个重要的目录:<br/>
- bin<br/>
- include<br/>
- lib</p>

<p>这对应了第二章的三部分。使用conda安装的bin会默认添加到<code>PATH</code>里去(可以在命令行直接运行)。<strong>include 和 lib文件夹下的东西不会添加到CompileTime/RunTime 的 search path里去</strong>，所以你需要编译运行什么软件可以将这两个目录分别添加到<code>CPATH</code>和<code>LD_LIBRARY_PATH</code>里去。</p>


    

      </div>

      <div class="row">
        <div class="large-6 columns">
        <p class="text-left" style="padding:15px 0px;">
      
          <a href="15260272539482.html" 
          title="Previous Post: Stream摄像头内容到浏览器">&laquo; Stream摄像头内容到浏览器</a>
      
        </p>
        </div>
        <div class="large-6 columns">
      <p class="text-right" style="padding:15px 0px;">
      
          <a  href="lvm-cache%20config:%20improve%20hdd%20performance%20via%20a%20ssd.html" 
          title="Next Post: lvm cache配置 -- 用固态硬盘提升大的存储盘的性能">lvm cache配置 -- 用固态硬盘提升大的存储盘的性能 &raquo;</a>
      
      </p>
        </div>
      </div>
      <div class="comments-wrap">
        <div class="share-comments">
          <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = klauscc.github.io;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = klauscc; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://klauscc.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

          

          
        </div>
      </div>
    </div><!-- article-wrap -->
  </div><!-- large 8 -->




 <div class="large-4 medium-4 columns">
  <div class="hide-for-small">
    <div id="sidebar" class="sidebar">
          <div id="site-info" class="site-info">
            
                <div class="site-a-logo"><img src="media/15401786151592/logo.jpg" /></div>
            
                <h1>Feng Cheng</h1>
                <div class="site-des">Ph.D student <br> University of North Carolina at Chapel Hill</div>
                <div class="social">









<a target="_blank" class="github" target="_blank" href="https://github.com/klauscc" title="GitHub">GitHub</a>
<a target="_blank" class="email" href="mailto:fengchan@cs.unc.edu" title="Email">Email</a>
  <a target="_blank" class="rss" href="atom.xml" title="RSS">RSS</a>
                
              	 </div>
          	</div>

             

              <div id="site-categories" class="side-item ">
                <div class="side-header">
                  <h2>Categories</h2>
                </div>
                <div class="side-content">

      	<p class="cat-list">
        
            <a href="linux.html"><strong>linux</strong></a>
        
            <a href="paper%20reading.html"><strong>paper reading</strong></a>
        
            <a href="deep%20learning.html"><strong>deep learning</strong></a>
        
            <a href="Digital%20Image%20Forensics.html"><strong>Digital Image Forensics</strong></a>
        
            <a href="engineering.html"><strong>engineering</strong></a>
         
        </p>


                </div>
              </div>

              <div id="site-categories" class="side-item">
                <div class="side-header">
                  <h2>Recent Posts</h2>
                </div>
                <div class="side-content">
                <ul class="posts-list">
	      
		      
			      <li class="post">
			        <a href="Feng_Cheng.html">Feng Cheng</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="convs.html">Techniques in convolution</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="15260272539482.html">Stream摄像头内容到浏览器</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="linux-starter-about-lib-and-conda.html">linux入门与服务器使用指南</a>
			      </li>
		     
		  
		      
			      <li class="post">
			        <a href="lvm-cache%20config:%20improve%20hdd%20performance%20via%20a%20ssd.html">lvm cache配置 -- 用固态硬盘提升大的存储盘的性能</a>
			      </li>
		     
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		  
		      
		   
		  		</ul>
                </div>
              </div>
        </div><!-- sidebar -->
      </div><!-- hide for small -->
</div><!-- large 4 -->

</div><!-- row -->

 <div class="page-bottom clearfix">
  <div class="row">
   <p class="copyright">Copyright &copy; 2015
Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a>,&nbsp; 
Theme used <a target="_blank" href="http://github.com">GitHub CSS</a>.</p>
  </div>
</div>

        </section>
      </div>
    </div>

  
    

    <script src="asset/js/foundation.min.js"></script>
    <script>
      $(document).foundation();
      function fixSidebarHeight(){
        var w1 = $('.markdown-body').height();
          var w2 = $('#sidebar').height();
          if (w1 > w2) { $('#sidebar').height(w1); };
      }
      $(function(){
        fixSidebarHeight();
      })
      $(window).load(function(){
          fixSidebarHeight();
      });
     
    </script>

    <script src="asset/chart/all-min.js"></script><script type="text/javascript">$(function(){    var mwebii=0;    var mwebChartEleId = 'mweb-chart-ele-';    $('pre>code').each(function(){        mwebii++;        var eleiid = mwebChartEleId+mwebii;        if($(this).hasClass('language-sequence')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = Diagram.parse($(this).text());            diagram.drawSVG(eleiid,{theme: 'simple'});        }else if($(this).hasClass('language-flow')){            var ele = $(this).addClass('nohighlight').parent();            $('<div id="'+eleiid+'"></div>').insertAfter(ele);            ele.hide();            var diagram = flowchart.parse($(this).text());            diagram.drawSVG(eleiid);        }    });});</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>


  </body>
</html>
